You are a senior frontend engineer and GIS-aware system designer.

Build a production-ready frontend web application using React.js and TypeScript (strict mode only).

OBJECTIVE:
Create a map-based drawing application that renders OpenStreetMap free tiles and allows users to draw, manage, search, and export geometrical features while enforcing spatial constraints on polygonal shapes.

MAP REQUIREMENTS:
- Use OpenStreetMap free tiles as the base map layer.
- Enable smooth zooming and panning.
- Ensure full responsiveness across screen sizes.

DRAWING TOOLS (INLINE UI – NO MODALS):
Provide a side or inline toolbar to draw:
- Polygon
- Rectangle
- Circle
- Line String

Drawing features:
- Active tool highlighting
- Cancel drawing (ESC key)
- Disable drawing tools when shape limits are reached

SPATIAL CONSTRAINT RULES (CRITICAL):
Rules apply ONLY to polygonal shapes:
- Polygon
- Rectangle
- Circle

Rules:
1. If a partial overlap is detected with existing polygonal features:
   - Automatically trim the new polygon to remove overlapping areas using Turf.js spatial operations.

2. If full enclosure is detected:
   - If the newly drawn polygon fully contains an existing polygon OR
   - If it is fully contained within an existing polygon
   - Block the drawing and show a clear error message.

3. Line Strings:
   - Must be excluded from all overlap rules.
   - Can freely cross or overlap any geometry.

Add clear inline comments explaining all polygon overlap and trimming logic.

SEARCH FUNCTIONALITY:
Location Search:
- Implement place search using OpenStreetMap Nominatim API.
- Provide auto-suggestions.
- On selection, pan and zoom the map to the searched location.
- Drop a temporary marker at the searched location.

Shape Search:
- Search drawn shapes by name, ID, or shape type.
- Highlight and zoom to the selected shape.

SHAPE INFORMATION:
- Calculate and display area for polygons, rectangles, and circles.
- Calculate and display length for line strings.
- Show measurements on hover tooltips and in a side details panel.

SHAPE LIST / LAYER PANEL:
- Display a list of all drawn shapes.
- Show shape type, name, and color.
- Allow selecting, zooming to, renaming, and deleting shapes.

DYNAMIC CONFIGURATION:
Shape limits must be configuration-driven and not hardcoded:
const MAX_SHAPES = {
  polygon: 10,
  rectangle: 5,
  circle: 5,
  line: 20
};

Disable tools automatically when limits are reached.

GEOJSON EXPORT:
- Export all drawn features as valid GeoJSON.
- Include geometry and properties such as:
  - id
  - shapeType
  - area or length
  - createdAt
- Provide a download button.
- Optionally include a read-only GeoJSON preview panel.

STATE & UX ENHANCEMENTS:
- Persist shapes in LocalStorage.
- Restore shapes on page reload.
- Support undo and redo actions.
- Keyboard shortcuts:
  - ESC to cancel drawing
  - Delete to remove selected shape

ARCHITECTURE & CODE QUALITY (MANDATORY):
- Use React.js with TypeScript (strict typing).
- Organize code modularly:
  src/
   ├─ components/
   ├─ hooks/
   ├─ utils/
   ├─ services/
   ├─ config/

- Implement clean custom hooks:
  - useDrawManager
  - usePolygonConstraints
  - useGeoJSONExport

- Add inline comments for complex logic.
- Maintain clean, readable, production-quality code.

DELIVERABLE:
- Fully functional frontend application.
- No backend usage.
- Use only the specified frontend technologies.
- Ensure professional UI, smooth UX, and maintainable code.
